<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>圆环进度条</title>
	</head>
	<body>
		<div class="canvas">
			<canvas id="cvs">您的浏览器不支持canvas功能</canvas>
		</div>
	</body>
</html>
<script type="text/javascript">
	// 获取画布标签
	let cvs = document.getElementById("cvs");
	
	// 宽高
	cvs.width = 400;
	cvs.height = 400;
	
	// 绘画环境
	let ctx = cvs.getContext("2d");
	
	// 圆的角度
	let rad = 2 * Math.PI;
	
	// 圆
	// let grd = ctx.createLinearGradient()
	ctx.lineWidth = 10;
	ctx.lineCap = "round"
	ctx.strokeStyle = "green"
	
	function drawcircle(x,y,r,s,e){
		
		ctx.beginPath();	

		ctx.arc(x,y,r,s,e,false);
		ctx.stroke()

		
	}
	
	
	// 中间文字
	function drawText(str,x,y){

		ctx.beginPath();
		ctx.font = "30px 微软雅黑"
		ctx.textAlign = "center"
		ctx.fillStyle = "green";
		ctx.fillText(str,x,y);
		ctx.closePath();
		
	}
	
	
	// 初始值
	let min = 0;
	let max = 300;
	let percent = 0.5
	
	// 定时器
	let timer = setInterval(function(){

		// 未到终点
		if (min > max * percent){
			// 清除定时器
			clearInterval(timer)
			timer = null;
		}else{
			ctx.clearRect(0,0,cvs.width,cvs.height)
			drawText(Math.floor(min/3)+"%",cvs.width/2,cvs.height/2)
			drawcircle(cvs.width/2,cvs.height/2,100,1/3*rad,(1/3+5*min/1800)*rad)
			min++
		}
		
	},25)
	
</script>
